name       : synergy
version    : 1.8.2
release    : 4
source     :
    - https://github.com/symless/synergy/archive/v1.8.2-stable.tar.gz : 2f84c718636f02acca4801fff30bd67f5bb2720304f7ab095f2112536da5a9fa
license    : GPL-2.0
component  : network.utils
summary    : Share one mouse and keyboard between multiple computers on your desk
description: |
    Share one mouse and keyboard between multiple computers on your desk
clang      : no
builddeps  :
    - pkgconfig(avahi-core)
    - pkgconfig(egl)
    - pkgconfig(Qt5Core)
    - pkgconfig(x11)
    - pkgconfig(xinerama)
    - pkgconfig(xtst)
    - pkgconfig(xrandr)
#unzip is to fix this issue: https://github.com/symless/synergy/issues/4368 see setup section for more nasty fixes
    - unzip
setup      : |
    mkdir -p ext/gmock-1.6.0 ext/gtest-1.6.0
    unzip ext/gmock-1.6.0.zip -d ext/gmock-1.6.0
    unzip ext/gtest-1.6.0.zip -d ext/gtest-1.6.0
build      : |
    %cmake .
    %make
    cd src/gui
    qmake
    %make
install    : |
    install -Dm755 bin/synergy $installdir/usr/bin/synergy
    install -Dm755 bin/synergyc $installdir/usr/bin/synergyc
    install -Dm755 bin/synergys $installdir/usr/bin/synergys
    install -Dm755 bin/syntool $installdir/usr/bin/syntool
    install -D -m 00644 res/synergy.ico $installdir/usr/share/icons/synergy.ico
    install -D -m 00644 res/synergy.desktop $installdir/usr/share/applications/synergy.desktop
